const localizationSettings = {
    keywordOverrides: {
        "arguments": "סעיפים",
        "boolean": "בוליאן",
        "break": "שבור",
        "byte": "בית",
        "case": "מקרה",
        "catch": "תפוס",
        "char": "תו",
        "const": "קבוע",
        "continue": "המשך",
        "debugger": "נפאי",
        "default": "ברירתמחדל",
        "delete": "מחק",
        "do": "עשה",
        "else": "אחרת",
        "double": "דובל",
        "eval": "שערך",
        "true": "חיובי",
        "false": "שלילי",
        "final": "סופי",
        "finally": "לבסוף",
        "float": "צף",
        "for": "עבור",
        "function": "יכולת",
        "goto": "לךאל",
        "if": "אם",
        "implements": "מיישם",
        "in": "מתוך",
        "instanceof": "מסוג",
        "int": "שלם",
        "interface": "ממשק",
        "let": "יהי",
        "long": "ארוך",
        "native": "יליד",
        "new": "חדש",
        "null": "כלום",
        "package": "חבילה",
        "private": "פרטי",
        "protected": "מוגן",
        "public": "פומבי",
        "return": "החזר",
        "short": "קצר",
        "static": "נייח",
        "switch": "החלף",
        "synchronized": "מתואם",
        "this": "אנוכי",
        "throw": "זרוק",
        "throws": "זורק",
        "transient": "חולף",
        "try": "נסה",
        "typeof": "סוגשל",
        "var": "משתנה",
        "void": "ריק",
        "volatile": "תנודתי",
        "while": "כלעוד",
        "with": "עם",
        "yield": "הנב",
        "class": "מחלקה",
        "enum": "מנייה",
        "export": "ייצא",
        "extends": "מרחיבה",
        "import": "ייבא",
        "super": "אבא",
    },
    operatorOverrides: {
        "||": "או",
        "&&": "וגם",
    },
    publicSymbols: {
        "שערך": {
            "value": "eval"
        },
        "האם_סופי": {
            "value": "isFinite"
        },
        "האם_לאמספר": {
            "value": "isNaN"
        },
        "נתח_צף": {
            "value": "parseFloat"
        },
        "נתח_שלם": {
            "value": "parseInt"
        },
        "פענח_כתובת_אתר": {
            "value": "decodeURI"
        },
        "פענח_רכיב_כתובת_אתר": {
            "value": "decodeURIComponent"
        },
        "קודד_כתובת_אתר": {
            "value": "encodeURI"
        },
        "קודד_רכיב_כתובת_אתר": {
            "value": "encodeURIComponent"
        },
        "ברח": {
            "value": "escape"
        },
        "בטל_בריחה": {
            "value": "unescape"
        },
        "האובייקט": {
            "value": "Object"
        },
        "היכולת": {
            "value": "Function"
        },
        "הבוליאן": {
            "value": "Boolean"
        },
        "שגיאה": {
            "value": "Error"
        },
        "שערך_שגיאה": {
            "value": "EvalError"
        },
        "שגיאה_פנימית": {
            "value": "InternalError"
        },
        "שגיאת_טווח": {
            "value": "RangeError"
        },
        "שגיאת_יחוס": {
            "value": "ReferenceError"
        },
        "עצור_ריצה": {
            "value": "StopIteration"
        },
        "שגיאת_תחביר": {
            "value": "SyntaxError"
        },
        "שגיאת_סוג": {
            "value": "TypeError"
        },
        "שגיאת_כתובת_אתר": {
            "value": "URIError"
        },
        "מספר": {
            "value": "Number"
        },
        "תאריך": {
            "value": "Date"
        },
        "המחרוזת": {
            "value": "String"
        },
        "ביטוי_סדיר": {
            "value": "RegExp"
        },
        "מערך": {
            "value": "Array"
        },
        "מערך_צף_32": {
            "value": "Float32Array"
        },
        "מערך_צף_64": {
            "value": "Float64Array"
        },
        "מערך_שלם_16": {
            "value": "Int16Array"
        },
        "מערך_שלם_32": {
            "value": "Int32Array"
        },
        "מערך_שלם_8": {
            "value": "Int8Array"
        },
        "מערך_שלםשאינומסומן_16": {
            "value": "Uint16Array"
        },
        "מערך_שלםשאינומסומן_32": {
            "value": "Uint32Array"
        },
        "מערך_שלםשאינומסומן_8": {
            "value": "Uint8Array"
        },
        "מערך_שלםשאינומסומן_מהודק_8": {
            "value": "Uint8ClampedArray"
        },
        "מערך_חיץ": {
            "value": "ArrayBuffer"
        },
        "מראה_תאריך": {
            "value": "DataView"
        },
        "שלםל": {
            "value": "Intl"
        },
        "סעיפים": {
            "value": "arguments"
        },
        "דרוש": {
            "value": "require"
        },
        "רכיב": {
            "value": "module"
        },
        "חלון": {
            "value": "window"
        },
        "מסמך": {
            "value": "document"
        },
        "סמל": {
            "value": "Symbol"
        },
        "קבוצה": {
            "value": "Set"
        },
        "מפה": {
            "value": "Map"
        },
        "קבוצה_חלשה": {
            "value": "WeakSet"
        },
        "מפה_חלשה": {
            "value": "WeakMap"
        },
        "מיופה_כח": {
            "value": "Proxy"
        },
        "השתקפות": {
            "value": "Reflect"
        },
        "הבטחה": {
            "value": "Promise",
            members: {
                "כולם": {
                    value: "all"
                },
                "מירוץ": {
                    value: "race"
                },
                "דחה": {
                    value: "reject"
                },
                "פטור": {
                    value: "resolve"
                }
            }
        },
        "חשבון": {
            "value": "Math",
            members: {
                "אי": {
                    "value": "E"
                },
                "פאי": {
                    "value": "PI"
                },
                "ערך_מוחלט": {
                    "value": "abs"
                },
                "תקרה": {
                    "value": "ceil"
                },
                "קוסינוס": {
                    "value": "cos"
                },
                "רצפה": {
                    "value": "floor"
                },
                "לוג": {
                    "value": "log"
                },
                "מירבי": {
                    "value": "max"
                },
                "מזערי": {
                    "value": "min"
                },
                "חזקה": {
                    "value": "pow"
                },
                "אקראי": {
                    "value": "random"
                },
                "עגל": {
                    "value": "round"
                },
                "סינוס": {
                    "value": "sin"
                },
                "שורש": {
                    "value": "sqrt"
                },
                "טנגנס": {
                    "value": "tan"
                },
                "קצוץ": {
                    "value": "trunc"
                }
            }
        },
        "פנחס": {
            "value": "JSON",
            members: {
                "פענח": {
                    value: "parse"
                },
                "מחרז": {
                    value: "stringify"
                }
            }
        },
        "בקרה": {
            value: "console",
            members: {
                "נקה": {
                    "value": "clear"
                },
                "ניפוי": {
                    "value": "debug"
                },
                "שגיאה": {
                    "value": "error"
                },
                "מידע": {
                    "value": "info"
                },
                "תעד": {
                    "value": "log"
                },
                "עקבות": {
                    "value": "trace"
                },
                "אזהר": {
                    "value": "warn"
                }
            }
        }
    },
    charOverrides: {
        "א": "a",
        "ב": "b",
        "ג": "g",
        "ד": "d",
        "ה": "h",
        "ו": "v",
        "ז": "z",
        "ח": "h",
        "ט": "t",
        "י": "i",
        "כ": "k",
        "ל": "l",
        "מ": "m",
        "נ": "n",
        "ס": "s",
        "ע": "a",
        "פ": "p",
        "צ": "z",
        "ק": "k",
        "ר": "r",
        "ש": "sh",
        "ת": "t",
        "ן": "n",
        "ם": "m",
        "ך": "ch",
        "ף": "f",
        "ץ": "z"
    }
};

export function localizedKeyword(keyword) {
    return localizationSettings.keywordOverrides[keyword] || keyword
}

export function localizedOperator(operator) {
    return localizationSettings.operatorOverrides[operator] || operator
}

export function translateNode(node) {
    const {type} = node
    const fn = translators[type]
    if (fn) {
        fn(node)
    }
}

let translationCtx = [];

const translators = {}

translators.Program = function(node) {
    for (const subNode of node.body) {
        translateNode(subNode)
    }
}

translators.ExpressionStatement = function(node) {
    translationCtx = []
    translateNode(node.expression)
}

translators.CallExpression = function(node) {
    translateNode(node.callee)
    for (const argNode of node.arguments) {
        translateNode(argNode)
    }
}

translators.Identifier = function(node) {
    const name = node.name
    let scope = localizationSettings.publicSymbols
    for (const id of translationCtx) {
        if (scope[id] && scope[id].members) {
            scope = scope[id].members
        } else {
            node.name = localizeWord(node.name)
        }
    }
    node.name = scope[node.name] && scope[node.name].value || localizeWord(node.name)
    translationCtx.push(name)
}

translators.MemberExpression = function(node) {
    translateNode(node.object)
    translateNode(node.property)
}

export function localizeWord(word) {
    let result = ""
    for (const char of word) {
        result += localizationSettings.charOverrides[char] || char
    }
    return result
}
